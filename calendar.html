<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Website - Calendar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81'
                        },
                        secondary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e'
                        },
                        task: {
                            lecture: '#3b82f6',
                            tutorial: '#10b981',
                            training: '#f59e0b',
                            meeting: '#8b5cf6',
                            assignment: '#ef4444',
                            exam: '#ec4899',
                            break: '#6366f1',
                            other: '#6b7280'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.35s ease',
                        'slide-up': 'slideUp 0.35s ease'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: 0 },
                            '100%': { opacity: 1 }
                        },
                        slideUp: {
                            '0%': { opacity: 0, transform: 'translateY(12px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' }
                        }
                    }
                }
            }
        };
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(15, 23, 42, 0.1);
            }

            .bg-gradient-light {
                background: linear-gradient(135deg, #e0f2fe 0%, #eef2ff 100%);
            }

            .bg-gradient-dark {
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            }

            .scrollbar-thin {
                scrollbar-width: thin;
            }

            .scrollbar-thin::-webkit-scrollbar {
                width: 6px;
            }

            .scrollbar-thin::-webkit-scrollbar-thumb {
                background-color: rgba(148, 163, 184, 0.6);
                border-radius: 3px;
            }

            .scrollbar-thin::-webkit-scrollbar-track {
                background: transparent;
            }

            .task-dot {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 9999px;
                display: inline-block;
            }
        }
    </style>
    <style>
        .calendar-day-cell {
            position: relative;
            min-height: 96px;
            border-radius: 0.75rem;
            border: 1px solid rgba(148, 163, 184, 0.3);
            background: rgba(255, 255, 255, 0.85);
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
        }

        .calendar-day-cell:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(15, 23, 42, 0.08);
        }

        .dark .calendar-day-cell {
            background: rgba(15, 23, 42, 0.65);
            border-color: rgba(71, 85, 105, 0.55);
        }

        .calendar-day-number {
            font-weight: 600;
            color: rgba(15, 23, 42, 0.82);
        }

        .dark .calendar-day-number {
            color: rgba(226, 232, 240, 0.9);
        }

        .calendar-day-meta {
            margin-top: 0.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;
            width: 100%;
        }

        .deadline-marker {
            position: absolute;
            top: 14px;
            bottom: 14px;
            right: 6px;
            width: 3px;
            border-radius: 9999px;
            background: linear-gradient(180deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.65));
        }

        .task-card {
            position: relative;
            padding: 1rem;
            border-radius: 0.9rem;
            border: 1px solid rgba(var(--task-color, 99, 102, 241), 0.35);
            background: linear-gradient(135deg, rgba(var(--task-color, 99, 102, 241), 0.18), rgba(var(--task-color, 99, 102, 241), 0.08));
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 16px 32px rgba(var(--task-color, 99, 102, 241), 0.22);
        }

        .dark .task-card {
            background: linear-gradient(135deg, rgba(var(--task-color, 99, 102, 241), 0.28), rgba(var(--task-color, 99, 102, 241), 0.12));
            border-color: rgba(var(--task-color, 99, 102, 241), 0.5);
        }

        .todo-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            padding: 0.85rem 1rem;
            border-radius: 0.9rem;
            border: 1px solid rgba(148, 163, 184, 0.25);
            background: rgba(248, 250, 252, 0.8);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .todo-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(15, 23, 42, 0.08);
        }

        .dark .todo-item {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(71, 85, 105, 0.45);
        }

        .todo-item.completed {
            opacity: 0.7;
        }

        .todo-item.completed .todo-title {
            text-decoration: line-through;
        }

        .modal {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.55);
        }
    </style>
</head>
<body id="body-element" class="min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300 font-sans">
    <nav class="bg-white dark:bg-gray-900 shadow-md transition-colors duration-300">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <img class="h-10 w-10 rounded-lg shadow-sm" src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/b5e1e873f23741a8b35ca632a3ca932f~tplv-a9rns2rl98-image.image?rcl=20251106180031E24DA2FD0C21EF10CDE5&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765015245&x-signature=RKJB2ttdvlu0bEeRta72gb9uI9Q%3D" alt="Calendar Logo">
                    <span class="text-xl font-bold text-primary-600 dark:text-primary-400">CalendarPro</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a class="text-gray-600 dark:text-gray-300 font-medium hover:text-primary-600 dark:hover:text-primary-400 transition-colors" href="index.html">Home</a>
                    <a class="text-gray-600 dark:text-gray-300 font-medium hover:text-primary-600 dark:hover:text-primary-400 transition-colors" href="intro.html">Introduction</a>
                    <a class="text-primary-600 dark:text-primary-400 font-semibold" href="calendar.html">Calendar</a>
                </div>
                <div class="flex items-center space-x-3">
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" aria-label="Toggle theme">
                        <i class="fa fa-moon-o text-gray-600 dark:hidden" aria-hidden="true"></i>
                        <i class="fa fa-sun-o text-yellow-300 hidden dark:block" aria-hidden="true"></i>
                    </button>
                    <button id="mobile-menu-button" class="md:hidden" aria-label="Toggle navigation">
                        <i class="fa fa-bars text-gray-600 dark:text-gray-300" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="md:hidden hidden pt-4 space-y-2 animate-fade-in">
                <a class="block py-2 text-gray-600 dark:text-gray-300 font-medium hover:text-primary-600 dark:hover:text-primary-400 transition-colors" href="index.html">Home</a>
                <a class="block py-2 text-gray-600 dark:text-gray-300 font-medium hover:text-primary-600 dark:hover:text-primary-400 transition-colors" href="intro.html">Introduction</a>
                <a class="block py-2 text-primary-600 dark:text-primary-400 font-semibold" href="calendar.html">Calendar</a>
            </div>
        </div>
    </nav>

    <main class="py-10">
        <div class="container mx-auto px-4 space-y-8">
            <section class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-5">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Plan Your Schedule</h1>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Stay on top of classes, deadlines, and to-dos with a single glance.</p>
                    </div>
                    <div class="flex flex-wrap gap-3">
                        <button id="add-task-btn" class="inline-flex items-center gap-2 py-2.5 px-4 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors">
                            <i class="fa fa-calendar-plus-o" aria-hidden="true"></i>
                            Add Schedule
                        </button>
                        <button id="add-deadline-btn" class="inline-flex items-center gap-2 py-2.5 px-4 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors">
                            <i class="fa fa-flag" aria-hidden="true"></i>
                            Add Deadline
                        </button>
                        <button id="add-todo-btn" class="inline-flex items-center gap-2 py-2.5 px-4 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white transition-colors">
                            <i class="fa fa-check-square-o" aria-hidden="true"></i>
                            Add To-Do
                        </button>
                    </div>
                </div>
                <div class="grid gap-6 mt-6 xl:grid-cols-[1.5fr,1fr]">
                    <div class="space-y-6">
                        <section class="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-5">
                            <div class="flex flex-wrap items-center justify-between gap-4">
                                <div class="flex items-center gap-3">
                                    <button id="prev-month" class="p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" aria-label="Previous month">
                                        <i class="fa fa-chevron-left" aria-hidden="true"></i>
                                    </button>
                                    <h2 id="current-month" class="text-lg font-semibold"></h2>
                                    <button id="next-month" class="p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" aria-label="Next month">
                                        <i class="fa fa-chevron-right" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <button id="today-btn" class="px-3 py-2 text-sm font-medium rounded-lg bg-secondary-100 text-secondary-700 hover:bg-secondary-200 dark:bg-secondary-900 dark:text-secondary-200 dark:hover:bg-secondary-800 transition-colors">Today</button>
                            </div>
                            <div class="mt-6 grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400">
                                <span>Sun</span>
                                <span>Mon</span>
                                <span>Tue</span>
                                <span>Wed</span>
                                <span>Thu</span>
                                <span>Fri</span>
                                <span>Sat</span>
                            </div>
                            <div id="calendar-grid" class="mt-2 grid grid-cols-7 gap-2"></div>
                        </section>

                        <section class="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-5">
                            <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Schedule for <span id="selected-date-display">Today</span></h2>
                            <div id="schedule-container" class="space-y-4"></div>
                        </section>

                        <section class="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-5">
                            <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
                                <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100">To-Do for <span id="todo-date-display">Today</span></h2>
                                <button id="clear-completed-btn" class="inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors">
                                    <i class="fa fa-trash-o" aria-hidden="true"></i>
                                    Clear Completed
                                </button>
                            </div>
                            <div class="grid md:grid-cols-2 gap-4 mt-4">
                                <div>
                                    <h3 class="text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mb-2">Pending</h3>
                                    <div id="todo-pending-container" class="space-y-2"></div>
                                </div>
                                <div>
                                    <h3 class="text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mb-2">Completed</h3>
                                    <div id="todo-completed-container" class="space-y-2"></div>
                                </div>
                            </div>
                        </section>

                        <section class="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-5">
                            <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Deadlines</h2>
                            <div id="deadlines-container" class="space-y-4"></div>
                        </section>
                    </div>

                    <div class="space-y-6">
                        <section class="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-5">
                            <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Today's Schedule</h2>
                            <div id="daily-schedule" class="max-h-[520px] overflow-y-auto scrollbar-thin pr-2 space-y-3"></div>
                        </section>

                        <section class="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-5">
                            <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Today's Summary</h2>
                            <div class="space-y-6">
                                <div>
                                    <h3 class="text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mb-2">Schedule</h3>
                                    <div id="today-schedule-container" class="space-y-2"></div>
                                </div>
                                <div>
                                    <h3 class="text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mb-2">Deadlines</h3>
                                    <div id="today-deadlines-container" class="space-y-2"></div>
                                </div>
                                <div>
                                    <h3 class="text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mb-2">To-Do</h3>
                                    <div id="today-todos-container" class="space-y-2"></div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Add Schedule Modal -->
    <div id="add-task-modal" class="modal fixed inset-0 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-md animate-fade-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Add Schedule Item</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" aria-label="Close modal">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <form id="add-task-form" class="space-y-4">
                <input type="hidden" id="task-date" value="">
                <div>
                    <label for="task-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                    <input type="text" id="task-name" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="task-type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Category</label>
                        <select id="task-type" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                            <option value="lecture">Lecture</option>
                            <option value="tutorial">Tutorial</option>
                            <option value="training">Training</option>
                            <option value="meeting">Meeting</option>
                            <option value="assignment">Assignment</option>
                            <option value="exam">Exam</option>
                            <option value="break">Break</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label for="task-date-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Date</label>
                        <input type="date" id="task-date-input" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="start-time" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Start Time</label>
                        <input type="time" id="start-time" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                    </div>
                    <div>
                        <label for="end-time" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">End Time</label>
                        <input type="time" id="end-time" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                    </div>
                </div>
                <div>
                    <label for="location" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Location</label>
                    <input type="text" id="location" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                </div>
                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label>
                    <textarea id="description" rows="3" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500"></textarea>
                </div>
                <div>
                    <label for="link" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Link (optional)</label>
                    <input type="url" id="link" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                </div>
                <div class="flex justify-end gap-2">
                    <button type="button" class="close-modal px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-md bg-primary-600 hover:bg-primary-700 text-white font-medium transition-colors">Add Schedule</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Deadline Modal -->
    <div id="add-deadline-modal" class="modal fixed inset-0 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-md animate-fade-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Add Deadline</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" aria-label="Close modal">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <form id="add-deadline-form" class="space-y-4">
                <input type="hidden" id="deadline-date" value="">
                <div>
                    <label for="deadline-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                    <input type="text" id="deadline-name" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500" required>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="deadline-date-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Date</label>
                        <input type="date" id="deadline-date-input" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div>
                        <label for="deadline-time" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Time</label>
                        <input type="time" id="deadline-time" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500" required>
                    </div>
                </div>
                <div>
                    <label for="deadline-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label>
                    <textarea id="deadline-description" rows="3" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500"></textarea>
                </div>
                <div>
                    <label for="deadline-link" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Link (optional)</label>
                    <input type="url" id="deadline-link" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500">
                </div>
                <div class="flex justify-end gap-2">
                    <button type="button" class="close-modal px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white font-medium transition-colors">Add Deadline</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add To-Do Modal -->
    <div id="add-todo-modal" class="modal fixed inset-0 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-md animate-fade-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Add To-Do</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" aria-label="Close modal">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <form id="add-todo-form" class="space-y-4">
                <input type="hidden" id="todo-date" value="">
                <div>
                    <label for="todo-title" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                    <input type="text" id="todo-title" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500" required>
                </div>
                <div>
                    <label for="todo-notes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Notes (optional)</label>
                    <textarea id="todo-notes" rows="3" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"></textarea>
                </div>
                <div>
                    <label for="todo-date-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Date</label>
                    <input type="date" id="todo-date-input" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500" required>
                </div>
                <div class="flex justify-end gap-2">
                    <button type="button" class="close-modal px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-md bg-emerald-600 hover:bg-emerald-700 text-white font-medium transition-colors">Add To-Do</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Schedule Modal -->
    <div id="edit-task-modal" class="modal fixed inset-0 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-md animate-fade-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Edit Schedule Item</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" aria-label="Close modal">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <form id="edit-task-form" class="space-y-4">
                <input type="hidden" id="edit-task-id" value="">
                <div>
                    <label for="edit-task-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                    <input type="text" id="edit-task-name" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="edit-task-type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Category</label>
                        <select id="edit-task-type" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                            <option value="lecture">Lecture</option>
                            <option value="tutorial">Tutorial</option>
                            <option value="training">Training</option>
                            <option value="meeting">Meeting</option>
                            <option value="assignment">Assignment</option>
                            <option value="exam">Exam</option>
                            <option value="break">Break</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label for="edit-task-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Date</label>
                        <input type="date" id="edit-task-date" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="edit-start-time" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Start Time</label>
                        <input type="time" id="edit-start-time" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                    </div>
                    <div>
                        <label for="edit-end-time" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">End Time</label>
                        <input type="time" id="edit-end-time" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500" required>
                    </div>
                </div>
                <div>
                    <label for="edit-location" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Location</label>
                    <input type="text" id="edit-location" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                </div>
                <div>
                    <label for="edit-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label>
                    <textarea id="edit-description" rows="3" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500"></textarea>
                </div>
                <div>
                    <label for="edit-link" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Link (optional)</label>
                    <input type="url" id="edit-link" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                </div>
                <div class="flex justify-end gap-2">
                    <button type="button" id="delete-task-btn" class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white transition-colors">Delete</button>
                    <button type="button" class="close-modal px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-md bg-primary-600 hover:bg-primary-700 text-white font-medium transition-colors">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Deadline Modal -->
    <div id="edit-deadline-modal" class="modal fixed inset-0 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-md animate-fade-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Edit Deadline</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" aria-label="Close modal">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <form id="edit-deadline-form" class="space-y-4">
                <input type="hidden" id="edit-deadline-id" value="">
                <div>
                    <label for="edit-deadline-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                    <input type="text" id="edit-deadline-name" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500" required>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="edit-deadline-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Date</label>
                        <input type="date" id="edit-deadline-date" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div>
                        <label for="edit-deadline-time" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Time</label>
                        <input type="time" id="edit-deadline-time" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500" required>
                    </div>
                </div>
                <div>
                    <label for="edit-deadline-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label>
                    <textarea id="edit-deadline-description" rows="3" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500"></textarea>
                </div>
                <div>
                    <label for="edit-deadline-link" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Link (optional)</label>
                    <input type="url" id="edit-deadline-link" class="w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-red-500 focus:border-red-500">
                </div>
                <div class="flex justify-end gap-2">
                    <button type="button" id="delete-deadline-btn" class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white transition-colors">Delete</button>
                    <button type="button" class="close-modal px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white font-medium transition-colors">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <footer class="bg-gray-900 dark:bg-black py-12 border-t border-gray-700 dark:border-gray-800">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between">
                <div class="mb-8 md:mb-0">
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="bg-primary-600 text-white p-1 rounded">
                            <i class="fa fa-calendar" aria-hidden="true"></i>
                        </div>
                        <span class="text-lg font-medium text-white">Calendar<span class="text-primary-400">Pro</span></span>
                    </div>
                    <p class="text-gray-400 max-w-xs">
                        A modern, intuitive calendar system to help you efficiently manage tasks, deadlines, and schedules.
                    </p>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                    <div>
                        <h3 class="text-sm uppercase tracking-wider text-gray-400 mb-4">Quick Links</h3>
                        <ul class="space-y-2">
                            <li><a href="index.html" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                            <li><a href="intro.html" class="text-gray-300 hover:text-white transition-colors">Introduction</a></li>
                            <li><a href="calendar.html" class="text-gray-300 hover:text-white transition-colors">Calendar</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-sm uppercase tracking-wider text-gray-400 mb-4">Features</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Task Management</a></li>
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Deadline Tracking</a></li>
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Daily Schedule</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-sm uppercase tracking-wider text-gray-400 mb-4">Contact Us</h3>
                        <ul class="space-y-2">
                            <li class="flex items-center">
                                <i class="fa fa-envelope-o mr-2 text-primary-400" aria-hidden="true"></i>
                                <a href="mailto:info@calendarpro.com" class="text-gray-300 hover:text-white transition-colors">info@calendarpro.com</a>
                            </li>
                            <li class="flex items-center">
                                <i class="fa fa-phone mr-2 text-primary-400" aria-hidden="true"></i>
                                <span class="text-gray-300">+1 (555) 123-4567</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 dark:border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 mb-4 md:mb-0">Â© 2025 CalendarPro. All rights reserved.</p>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fa fa-facebook" aria-hidden="true"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-white transition-colors">
                        <i class="fa fa-twitter" aria-hidden="true"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-white transition-colors">
                        <i class="fa fa-instagram" aria-hidden="true"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-white transition-colors">
                        <i class="fa fa-linkedin" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const STORAGE_KEYS = {
            schedules: 'calendar_schedules',
            deadlines: 'calendar_deadlines',
            todos: 'calendar_todos',
            legacyTasks: 'tasks'
        };

        const TASK_TYPE_COLORS = {
            lecture: '#3b82f6',
            tutorial: '#10b981',
            training: '#f59e0b',
            meeting: '#8b5cf6',
            assignment: '#ef4444',
            exam: '#ec4899',
            break: '#6366f1',
            other: '#6b7280'
        };

        const MONTH_NAMES = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

        document.addEventListener('DOMContentLoaded', () => {
            const state = {
                today: normaliseDate(new Date()),
                current: normaliseDate(new Date()),
                selected: normaliseDate(new Date())
            };

            const elements = {
                body: document.getElementById('body-element'),
                themeToggle: document.getElementById('theme-toggle'),
                mobileMenuButton: document.getElementById('mobile-menu-button'),
                mobileMenu: document.getElementById('mobile-menu'),
                prevMonth: document.getElementById('prev-month'),
                nextMonth: document.getElementById('next-month'),
                todayButton: document.getElementById('today-btn'),
                currentMonthLabel: document.getElementById('current-month'),
                calendarGrid: document.getElementById('calendar-grid'),
                selectedDateDisplay: document.getElementById('selected-date-display'),
                todoDateDisplay: document.getElementById('todo-date-display'),
                scheduleContainer: document.getElementById('schedule-container'),
                deadlinesContainer: document.getElementById('deadlines-container'),
                todoPendingContainer: document.getElementById('todo-pending-container'),
                todoCompletedContainer: document.getElementById('todo-completed-container'),
                dailySchedule: document.getElementById('daily-schedule'),
                todayScheduleContainer: document.getElementById('today-schedule-container'),
                todayDeadlinesContainer: document.getElementById('today-deadlines-container'),
                todayTodosContainer: document.getElementById('today-todos-container'),
                addTaskModal: document.getElementById('add-task-modal'),
                addDeadlineModal: document.getElementById('add-deadline-modal'),
                addTodoModal: document.getElementById('add-todo-modal'),
                editTaskModal: document.getElementById('edit-task-modal'),
                editDeadlineModal: document.getElementById('edit-deadline-modal'),
                addTaskForm: document.getElementById('add-task-form'),
                addDeadlineForm: document.getElementById('add-deadline-form'),
                addTodoForm: document.getElementById('add-todo-form'),
                editTaskForm: document.getElementById('edit-task-form'),
                editDeadlineForm: document.getElementById('edit-deadline-form'),
                clearCompletedButton: document.getElementById('clear-completed-btn'),
                addTaskButton: document.getElementById('add-task-btn'),
                addDeadlineButton: document.getElementById('add-deadline-btn'),
                addTodoButton: document.getElementById('add-todo-btn'),
                deleteTaskButton: document.getElementById('delete-task-btn'),
                deleteDeadlineButton: document.getElementById('delete-deadline-btn'),
                closeButtons: document.querySelectorAll('.close-modal'),
                modalContainers: document.querySelectorAll('.modal')
            };

            initialiseTheme(elements.body, elements.themeToggle);
            initialiseNavigation(elements.mobileMenuButton, elements.mobileMenu);
            ensureSeedData();

            elements.prevMonth.addEventListener('click', () => {
                const updated = new Date(state.current.getFullYear(), state.current.getMonth() - 1, 1);
                state.current = normaliseDate(updated);
                renderAll();
            });

            elements.nextMonth.addEventListener('click', () => {
                const updated = new Date(state.current.getFullYear(), state.current.getMonth() + 1, 1);
                state.current = normaliseDate(updated);
                renderAll();
            });

            elements.todayButton.addEventListener('click', () => {
                state.current = normaliseDate(new Date());
                state.selected = normaliseDate(new Date());
                renderAll();
            });

            elements.addTaskButton.addEventListener('click', () => openAddModal('schedule'));
            elements.addDeadlineButton.addEventListener('click', () => openAddModal('deadline'));
            elements.addTodoButton.addEventListener('click', () => openAddModal('todo'));

            elements.addTaskForm.addEventListener('submit', handleAddSchedule);
            elements.addDeadlineForm.addEventListener('submit', handleAddDeadline);
            elements.addTodoForm.addEventListener('submit', handleAddTodo);

            elements.editTaskForm.addEventListener('submit', handleEditSchedule);
            elements.editDeadlineForm.addEventListener('submit', handleEditDeadline);

            elements.deleteTaskButton.addEventListener('click', handleDeleteSchedule);
            elements.deleteDeadlineButton.addEventListener('click', handleDeleteDeadline);

            elements.clearCompletedButton.addEventListener('click', () => {
                const todos = getTodos().filter(todo => !todo.completed);
                saveItems(STORAGE_KEYS.todos, todos);
                renderAll();
            });

            elements.closeButtons.forEach(button => {
                button.addEventListener('click', () => closeAllModals());
            });

            elements.modalContainers.forEach(container => {
                container.addEventListener('click', event => {
                    if (event.target === container) {
                        closeAllModals();
                    }
                });
            });

            document.addEventListener('keydown', event => {
                if (event.key === 'Escape') {
                    closeAllModals();
                }
            });

            renderAll();

            function renderAll() {
                renderCalendar();
                renderScheduleList();
                renderDeadlinesList();
                renderTodosList();
                renderDailySchedule();
                renderTodaySummary();
            }

            function renderCalendar() {
                const year = state.current.getFullYear();
                const month = state.current.getMonth();

                elements.currentMonthLabel.textContent = `${MONTH_NAMES[month]} ${year}`;
                elements.calendarGrid.innerHTML = '';

                const firstDayOfWeek = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const daysInPrevMonth = new Date(year, month, 0).getDate();

                for (let i = firstDayOfWeek - 1; i >= 0; i--) {
                    const date = new Date(year, month - 1, daysInPrevMonth - i);
                    elements.calendarGrid.appendChild(createDayCell(date, true));
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const date = new Date(year, month, day);
                    elements.calendarGrid.appendChild(createDayCell(date, false));
                }

                const totalCells = elements.calendarGrid.children.length;
                const remainingCells = totalCells % 7 === 0 ? 0 : 7 - (totalCells % 7);
                for (let day = 1; day <= remainingCells; day++) {
                    const date = new Date(year, month + 1, day);
                    elements.calendarGrid.appendChild(createDayCell(date, true));
                }
            }

            function createDayCell(date, isOtherMonth) {
                const dateKey = formatDateForStorage(date);
                const schedules = getSchedules().filter(schedule => schedule.date === dateKey);
                const deadlines = getDeadlines().filter(deadline => deadline.date === dateKey);

                const cell = document.createElement('div');
                cell.className = 'calendar-day-cell px-2 py-2 flex flex-col items-start gap-1 hover:cursor-pointer';

                if (isOtherMonth) {
                    cell.classList.add('opacity-60');
                }

                if (isSameDay(date, state.selected)) {
                    cell.classList.add('ring-2', 'ring-primary-500', 'dark:ring-primary-400');
                }

                if (!isOtherMonth && isSameDay(date, state.today)) {
                    cell.classList.add('border-primary-500', 'dark:border-primary-400');
                }

                const dayNumber = document.createElement('div');
                dayNumber.className = 'calendar-day-number text-sm';
                dayNumber.textContent = date.getDate();
                cell.appendChild(dayNumber);

                if (deadlines.length > 0) {
                    const marker = document.createElement('div');
                    marker.className = 'deadline-marker';
                    marker.title = `${deadlines.length} deadline${deadlines.length > 1 ? 's' : ''}`;
                    cell.appendChild(marker);
                }

                if (schedules.length > 0 || deadlines.length > 0) {
                    const indicators = document.createElement('div');
                    indicators.className = 'calendar-day-meta';

                    schedules.slice(0, 3).forEach(schedule => {
                        const dot = document.createElement('span');
                        dot.className = 'task-dot';
                        dot.style.backgroundColor = TASK_TYPE_COLORS[schedule.type] || TASK_TYPE_COLORS.other;
                        indicators.appendChild(dot);
                    });

                    deadlines.slice(0, 2).forEach(() => {
                        const dot = document.createElement('span');
                        dot.className = 'task-dot';
                        dot.style.backgroundColor = TASK_TYPE_COLORS.assignment;
                        indicators.appendChild(dot);
                    });

                    const totalItems = schedules.length + deadlines.length;
                    if (totalItems > 5) {
                        const more = document.createElement('span');
                        more.className = 'text-xs text-gray-500 dark:text-gray-400';
                        more.textContent = `+${totalItems - 5}`;
                        indicators.appendChild(more);
                    }

                    cell.appendChild(indicators);
                }

                cell.addEventListener('click', () => {
                    state.selected = normaliseDate(date);
                    renderAll();
                });

                return cell;
            }

            function renderScheduleList() {
                const dateKey = formatDateForStorage(state.selected);
                const schedules = getSchedules().filter(schedule => schedule.date === dateKey).sort((a, b) => a.startTime.localeCompare(b.startTime));

                elements.selectedDateDisplay.textContent = isSameDay(state.selected, state.today) ? 'Today' : formatReadableDate(state.selected);
                elements.scheduleContainer.innerHTML = '';

                if (schedules.length === 0) {
                    elements.scheduleContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400 text-center py-6">No schedule items for this day</div>';
                    return;
                }

                schedules.forEach(schedule => {
                    const card = document.createElement('div');
                    card.className = 'task-card';
                    const rgb = hexToRgb(TASK_TYPE_COLORS[schedule.type] || TASK_TYPE_COLORS.other);
                    card.style.setProperty('--task-color', `${rgb.r}, ${rgb.g}, ${rgb.b}`);

                    const header = document.createElement('div');
                    header.className = 'flex items-start justify-between gap-3';

                    const title = document.createElement('div');
                    title.className = 'flex items-center gap-2 text-sm font-semibold text-gray-800 dark:text-gray-100';

                    const dot = document.createElement('span');
                    dot.className = 'task-dot';
                    dot.style.backgroundColor = TASK_TYPE_COLORS[schedule.type] || TASK_TYPE_COLORS.other;

                    const name = document.createElement('span');
                    name.textContent = schedule.name;

                    title.appendChild(dot);
                    title.appendChild(name);

                    const time = document.createElement('div');
                    time.className = 'text-sm font-medium text-gray-600 dark:text-gray-300';
                    time.textContent = `${schedule.startTime} - ${schedule.endTime}`;

                    header.appendChild(title);
                    header.appendChild(time);
                    card.appendChild(header);

                    if (schedule.location) {
                        const location = document.createElement('div');
                        location.className = 'text-sm text-gray-600 dark:text-gray-300 mt-2';
                        location.textContent = schedule.location;
                        card.appendChild(location);
                    }

                    if (schedule.description) {
                        const description = document.createElement('div');
                        description.className = 'text-xs text-gray-500 dark:text-gray-400 mt-2';
                        description.textContent = schedule.description;
                        card.appendChild(description);
                    }

                    if (schedule.link) {
                        const link = document.createElement('a');
                        link.className = 'text-sm text-primary-600 dark:text-primary-400 mt-3 inline-flex items-center gap-2';
                        link.href = schedule.link;
                        link.target = '_blank';
                        link.rel = 'noopener';
                        link.innerHTML = '<i class="fa fa-external-link" aria-hidden="true"></i>Open resource';
                        card.appendChild(link);
                    }

                    card.addEventListener('click', () => openEditSchedule(schedule));
                    elements.scheduleContainer.appendChild(card);
                });
            }

            function renderDeadlinesList() {
                const deadlines = getDeadlines().slice().sort((a, b) => {
                    if (a.date !== b.date) {
                        return a.date.localeCompare(b.date);
                    }
                    return a.time.localeCompare(b.time);
                });

                elements.deadlinesContainer.innerHTML = '';

                if (deadlines.length === 0) {
                    elements.deadlinesContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400 text-center py-6">No deadlines scheduled</div>';
                    return;
                }

                deadlines.forEach(deadline => {
                    const card = document.createElement('div');
                    card.className = 'task-card border-red-200 dark:border-red-800';
                    card.style.setProperty('--task-color', '239, 68, 68');

                    const header = document.createElement('div');
                    header.className = 'flex items-start justify-between gap-3';

                    const title = document.createElement('div');
                    title.className = 'flex items-center gap-2 text-sm font-semibold text-red-700 dark:text-red-300';

                    const dot = document.createElement('span');
                    dot.className = 'task-dot';
                    dot.style.backgroundColor = TASK_TYPE_COLORS.assignment;

                    const name = document.createElement('span');
                    name.textContent = deadline.name;

                    title.appendChild(dot);
                    title.appendChild(name);

                    const time = document.createElement('div');
                    time.className = 'text-sm font-medium text-red-600 dark:text-red-400';
                    time.textContent = `${formatReadableDate(deadline.date)} â¢ ${deadline.time}`;

                    header.appendChild(title);
                    header.appendChild(time);
                    card.appendChild(header);

                    if (deadline.description) {
                        const description = document.createElement('div');
                        description.className = 'text-xs text-gray-500 dark:text-gray-400 mt-2';
                        description.textContent = deadline.description;
                        card.appendChild(description);
                    }

                    if (deadline.link) {
                        const link = document.createElement('a');
                        link.className = 'text-sm text-red-600 dark:text-red-400 mt-3 inline-flex items-center gap-2';
                        link.href = deadline.link;
                        link.target = '_blank';
                        link.rel = 'noopener';
                        link.innerHTML = '<i class="fa fa-external-link" aria-hidden="true"></i>Open resource';
                        card.appendChild(link);
                    }

                    card.addEventListener('click', () => openEditDeadline(deadline));
                    elements.deadlinesContainer.appendChild(card);
                });
            }

            function renderTodosList() {
                const dateKey = formatDateForStorage(state.selected);
                const todos = getTodos().filter(todo => todo.date === dateKey);

                elements.todoDateDisplay.textContent = isSameDay(state.selected, state.today) ? 'Today' : formatReadableDate(state.selected);
                elements.todoPendingContainer.innerHTML = '';
                elements.todoCompletedContainer.innerHTML = '';

                if (todos.length === 0) {
                    elements.todoPendingContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400">No to-dos yet</div>';
                    elements.todoCompletedContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400">Nothing completed</div>';
                    return;
                }

                const pending = todos.filter(todo => !todo.completed);
                const completed = todos.filter(todo => todo.completed).sort((a, b) => (b.completedAt || 0) - (a.completedAt || 0));

                if (pending.length === 0) {
                    elements.todoPendingContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400">No pending items</div>';
                } else {
                    pending.forEach(todo => elements.todoPendingContainer.appendChild(createTodoItem(todo)));
                }

                if (completed.length === 0) {
                    elements.todoCompletedContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400">No completed items</div>';
                } else {
                    completed.forEach(todo => elements.todoCompletedContainer.appendChild(createTodoItem(todo)));
                }
            }

            function createTodoItem(todo) {
                const item = document.createElement('div');
                item.className = 'todo-item';
                if (todo.completed) {
                    item.classList.add('completed');
                }

                const content = document.createElement('div');
                content.className = 'flex items-start gap-3 flex-1';

                const toggle = document.createElement('button');
                toggle.className = 'w-9 h-9 rounded-full border border-emerald-400 flex items-center justify-center text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-colors';
                toggle.innerHTML = todo.completed ? '<i class="fa fa-check" aria-hidden="true"></i>' : '<i class="fa fa-circle-o" aria-hidden="true"></i>';
                toggle.addEventListener('click', event => {
                    event.stopPropagation();
                    toggleTodo(todo.id);
                });

                const text = document.createElement('div');
                text.className = 'flex-1';

                const title = document.createElement('div');
                title.className = 'todo-title text-sm font-semibold text-gray-800 dark:text-gray-100';
                title.textContent = todo.title;

                const notes = document.createElement('div');
                notes.className = 'text-xs text-gray-500 dark:text-gray-400 mt-1';
                notes.textContent = todo.notes || '';

                text.appendChild(title);
                if (todo.notes) {
                    text.appendChild(notes);
                }

                content.appendChild(toggle);
                content.appendChild(text);

                const actions = document.createElement('div');
                actions.className = 'flex gap-2';

                const deleteButton = document.createElement('button');
                deleteButton.className = 'todo-action px-3 py-1 rounded-full border border-red-200 dark:border-red-700 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors';
                deleteButton.innerHTML = '<i class="fa fa-trash" aria-hidden="true"></i>';
                deleteButton.addEventListener('click', event => {
                    event.stopPropagation();
                    deleteTodo(todo.id);
                });

                actions.appendChild(deleteButton);
                item.appendChild(content);
                item.appendChild(actions);

                return item;
            }

            function renderDailySchedule() {
                const dateKey = formatDateForStorage(state.selected);
                const schedules = getSchedules().filter(schedule => schedule.date === dateKey).sort((a, b) => a.startTime.localeCompare(b.startTime));

                elements.dailySchedule.innerHTML = '';

                const hours = Array.from({ length: 17 }, (_, index) => 6 + index);
                hours.forEach(hour => {
                    const slot = document.createElement('div');
                    slot.className = 'flex items-start gap-4';

                    const label = document.createElement('div');
                    label.className = 'w-16 text-xs uppercase text-gray-500 dark:text-gray-400 pt-1';
                    label.textContent = formatHour(hour);

                    const content = document.createElement('div');
                    content.className = 'flex-1 space-y-2';

                    const matches = schedules.filter(schedule => parseInt(schedule.startTime.split(':')[0], 10) === hour);
                    matches.forEach(schedule => {
                        const pill = document.createElement('div');
                        pill.className = 'schedule-pill inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold text-gray-800 dark:text-gray-100 bg-white dark:bg-gray-900 border';
                        const color = TASK_TYPE_COLORS[schedule.type] || TASK_TYPE_COLORS.other;
                        pill.style.backgroundColor = `${color}22`;
                        pill.style.borderColor = `${color}55`;
                        pill.textContent = `${schedule.startTime} â¢ ${schedule.name}`;
                        pill.addEventListener('click', () => openEditSchedule(schedule));
                        content.appendChild(pill);
                    });

                    slot.appendChild(label);
                    slot.appendChild(content);
                    elements.dailySchedule.appendChild(slot);
                });
            }

            function renderTodaySummary() {
                const todayKey = formatDateForStorage(state.today);
                const schedules = getSchedules().filter(schedule => schedule.date === todayKey).sort((a, b) => a.startTime.localeCompare(b.startTime));
                const deadlines = getDeadlines().filter(deadline => deadline.date === todayKey).sort((a, b) => a.time.localeCompare(b.time));
                const todos = getTodos().filter(todo => todo.date === todayKey);

                elements.todayScheduleContainer.innerHTML = '';
                elements.todayDeadlinesContainer.innerHTML = '';
                elements.todayTodosContainer.innerHTML = '';

                if (schedules.length === 0) {
                    elements.todayScheduleContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400">No schedule items today</div>';
                } else {
                    schedules.forEach(schedule => {
                        const item = document.createElement('div');
                        item.className = 'todo-item';
                        const color = TASK_TYPE_COLORS[schedule.type] || TASK_TYPE_COLORS.other;
                        item.style.backgroundColor = `${color}15`;
                        item.style.borderColor = `${color}55`;
                        const title = document.createElement('div');
                        title.className = 'text-sm font-semibold text-gray-800 dark:text-gray-100';
                        title.textContent = schedule.name;
                        const time = document.createElement('div');
                        time.className = 'text-xs text-gray-500 dark:text-gray-400';
                        time.textContent = `${schedule.startTime} - ${schedule.endTime}`;
                        item.appendChild(title);
                        item.appendChild(time);
                        item.addEventListener('click', () => openEditSchedule(schedule));
                        elements.todayScheduleContainer.appendChild(item);
                    });
                }

                if (deadlines.length === 0) {
                    elements.todayDeadlinesContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400">No deadlines today</div>';
                } else {
                    deadlines.forEach(deadline => {
                        const item = document.createElement('div');
                        item.className = 'todo-item';
                        item.style.backgroundColor = 'rgba(239, 68, 68, 0.15)';
                        item.style.borderColor = 'rgba(239, 68, 68, 0.45)';
                        const title = document.createElement('div');
                        title.className = 'text-sm font-semibold text-red-700 dark:text-red-300';
                        title.textContent = deadline.name;
                        const time = document.createElement('div');
                        time.className = 'text-xs text-red-500 dark:text-red-300';
                        time.textContent = deadline.time;
                        item.appendChild(title);
                        item.appendChild(time);
                        item.addEventListener('click', () => openEditDeadline(deadline));
                        elements.todayDeadlinesContainer.appendChild(item);
                    });
                }

                if (todos.length === 0) {
                    elements.todayTodosContainer.innerHTML = '<div class="text-sm text-gray-500 dark:text-gray-400">No to-dos for today</div>';
                } else {
                    todos.sort((a, b) => Number(a.completed) - Number(b.completed));
                    todos.forEach(todo => {
                        const item = document.createElement('div');
                        item.className = 'todo-item';
                        if (todo.completed) {
                            item.classList.add('completed');
                        }
                        const title = document.createElement('div');
                        title.className = 'text-sm font-semibold text-gray-800 dark:text-gray-100';
                        title.textContent = todo.title;
                        item.appendChild(title);
                        item.addEventListener('click', () => toggleTodo(todo.id));
                        elements.todayTodosContainer.appendChild(item);
                    });
                }
            }

            function openAddModal(type) {
                closeAllModals();
                const dateValue = formatDateForStorage(state.selected);
                if (type === 'schedule') {
                    elements.addTaskForm.reset();
                    document.getElementById('task-date-input').value = dateValue;
                    elements.addTaskModal.classList.remove('hidden');
                } else if (type === 'deadline') {
                    elements.addDeadlineForm.reset();
                    document.getElementById('deadline-date-input').value = dateValue;
                    elements.addDeadlineModal.classList.remove('hidden');
                } else {
                    elements.addTodoForm.reset();
                    document.getElementById('todo-date-input').value = dateValue;
                    elements.addTodoModal.classList.remove('hidden');
                }
            }

            function openEditSchedule(schedule) {
                document.getElementById('edit-task-id').value = schedule.id;
                document.getElementById('edit-task-name').value = schedule.name;
                document.getElementById('edit-task-type').value = schedule.type;
                document.getElementById('edit-task-date').value = schedule.date;
                document.getElementById('edit-start-time').value = schedule.startTime;
                document.getElementById('edit-end-time').value = schedule.endTime;
                document.getElementById('edit-location').value = schedule.location || '';
                document.getElementById('edit-description').value = schedule.description || '';
                document.getElementById('edit-link').value = schedule.link || '';
                closeAllModals();
                elements.editTaskModal.classList.remove('hidden');
            }

            function openEditDeadline(deadline) {
                document.getElementById('edit-deadline-id').value = deadline.id;
                document.getElementById('edit-deadline-name').value = deadline.name;
                document.getElementById('edit-deadline-date').value = deadline.date;
                document.getElementById('edit-deadline-time').value = deadline.time;
                document.getElementById('edit-deadline-description').value = deadline.description || '';
                document.getElementById('edit-deadline-link').value = deadline.link || '';
                closeAllModals();
                elements.editDeadlineModal.classList.remove('hidden');
            }

            function closeAllModals() {
                [elements.addTaskModal, elements.addDeadlineModal, elements.addTodoModal, elements.editTaskModal, elements.editDeadlineModal].forEach(modal => modal.classList.add('hidden'));
            }

            function handleAddSchedule(event) {
                event.preventDefault();
                const payload = {
                    id: generateId(),
                    name: event.target['task-name'].value.trim(),
                    type: event.target['task-type'].value,
                    date: event.target['task-date-input'].value,
                    startTime: event.target['start-time'].value,
                    endTime: event.target['end-time'].value,
                    location: event.target['location'].value.trim(),
                    description: event.target['description'].value.trim(),
                    link: event.target['link'].value.trim()
                };
                const schedules = getSchedules();
                schedules.push(payload);
                saveItems(STORAGE_KEYS.schedules, schedules);
                closeAllModals();
                renderAll();
            }

            function handleAddDeadline(event) {
                event.preventDefault();
                const payload = {
                    id: generateId(),
                    name: event.target['deadline-name'].value.trim(),
                    date: event.target['deadline-date-input'].value,
                    time: event.target['deadline-time'].value,
                    description: event.target['deadline-description'].value.trim(),
                    link: event.target['deadline-link'].value.trim()
                };
                const deadlines = getDeadlines();
                deadlines.push(payload);
                saveItems(STORAGE_KEYS.deadlines, deadlines);
                closeAllModals();
                renderAll();
            }

            function handleAddTodo(event) {
                event.preventDefault();
                const payload = {
                    id: generateId(),
                    title: event.target['todo-title'].value.trim(),
                    notes: event.target['todo-notes'].value.trim(),
                    date: event.target['todo-date-input'].value,
                    completed: false,
                    completedAt: null
                };
                const todos = getTodos();
                todos.push(payload);
                saveItems(STORAGE_KEYS.todos, todos);
                closeAllModals();
                renderAll();
            }

            function handleEditSchedule(event) {
                event.preventDefault();
                const scheduleId = event.target['edit-task-id'].value;
                const schedules = getSchedules();
                const index = schedules.findIndex(schedule => schedule.id === scheduleId);
                if (index === -1) {
                    return;
                }
                schedules[index] = {
                    ...schedules[index],
                    name: event.target['edit-task-name'].value.trim(),
                    type: event.target['edit-task-type'].value,
                    date: event.target['edit-task-date'].value,
                    startTime: event.target['edit-start-time'].value,
                    endTime: event.target['edit-end-time'].value,
                    location: event.target['edit-location'].value.trim(),
                    description: event.target['edit-description'].value.trim(),
                    link: event.target['edit-link'].value.trim()
                };
                saveItems(STORAGE_KEYS.schedules, schedules);
                closeAllModals();
                renderAll();
            }

            function handleEditDeadline(event) {
                event.preventDefault();
                const deadlineId = event.target['edit-deadline-id'].value;
                const deadlines = getDeadlines();
                const index = deadlines.findIndex(deadline => deadline.id === deadlineId);
                if (index === -1) {
                    return;
                }
                deadlines[index] = {
                    ...deadlines[index],
                    name: event.target['edit-deadline-name'].value.trim(),
                    date: event.target['edit-deadline-date'].value,
                    time: event.target['edit-deadline-time'].value,
                    description: event.target['edit-deadline-description'].value.trim(),
                    link: event.target['edit-deadline-link'].value.trim()
                };
                saveItems(STORAGE_KEYS.deadlines, deadlines);
                closeAllModals();
                renderAll();
            }

            function handleDeleteSchedule() {
                if (!confirm('Delete this schedule item?')) {
                    return;
                }
                const scheduleId = document.getElementById('edit-task-id').value;
                const schedules = getSchedules().filter(schedule => schedule.id !== scheduleId);
                saveItems(STORAGE_KEYS.schedules, schedules);
                closeAllModals();
                renderAll();
            }

            function handleDeleteDeadline() {
                if (!confirm('Delete this deadline?')) {
                    return;
                }
                const deadlineId = document.getElementById('edit-deadline-id').value;
                const deadlines = getDeadlines().filter(deadline => deadline.id !== deadlineId);
                saveItems(STORAGE_KEYS.deadlines, deadlines);
                closeAllModals();
                renderAll();
            }

            function toggleTodo(id) {
                const todos = getTodos();
                const index = todos.findIndex(todo => todo.id === id);
                if (index === -1) {
                    return;
                }
                const todo = todos[index];
                const completed = !todo.completed;
                todos[index] = {
                    ...todo,
                    completed,
                    completedAt: completed ? Date.now() : null
                };
                saveItems(STORAGE_KEYS.todos, todos);
                renderAll();
            }

            function deleteTodo(id) {
                const todos = getTodos().filter(todo => todo.id !== id);
                saveItems(STORAGE_KEYS.todos, todos);
                renderAll();
            }
        });

        function initialiseTheme(bodyElement, toggleButton) {
            const rootElement = document.documentElement;
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            const setTheme = (isDark) => {
                [rootElement, bodyElement].forEach(element => {
                    if (!element) {
                        return;
                    }
                    element.classList.toggle('dark', isDark);
                });
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            };

            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                setTheme(true);
            } else {
                setTheme(false);
            }

            if (!toggleButton) {
                return;
            }

            toggleButton.addEventListener('click', () => {
                const nextIsDark = !rootElement.classList.contains('dark');
                setTheme(nextIsDark);
            });
        }

        function initialiseNavigation(button, menu) {
            button.addEventListener('click', () => {
                menu.classList.toggle('hidden');
            });
        }

        function ensureSeedData() {
            migrateLegacySchedules();
            if (getSchedules().length === 0) {
                saveItems(STORAGE_KEYS.schedules, createSampleSchedules());
            }
            if (getDeadlines().length === 0) {
                saveItems(STORAGE_KEYS.deadlines, createSampleDeadlines());
            }
            if (getTodos().length === 0) {
                saveItems(STORAGE_KEYS.todos, createSampleTodos());
            }
        }

        function migrateLegacySchedules() {
            const legacy = localStorage.getItem(STORAGE_KEYS.legacyTasks);
            if (!legacy || localStorage.getItem(STORAGE_KEYS.schedules)) {
                return;
            }
            try {
                const parsed = JSON.parse(legacy);
                if (Array.isArray(parsed)) {
                    saveItems(STORAGE_KEYS.schedules, parsed.map(task => ({
                        id: task.id || generateId(),
                        name: task.name || task.title || 'Untitled',
                        type: task.type || 'other',
                        date: task.date,
                        startTime: task.startTime || '09:00',
                        endTime: task.endTime || '10:00',
                        location: task.location || '',
                        description: task.description || '',
                        link: task.link || ''
                    })));
                }
            } catch (error) {
                console.warn('Failed to migrate legacy tasks', error);
            }
        }

        function createSampleSchedules() {
            const today = normaliseDate(new Date());
            const tomorrow = normaliseDate(new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1));
            return [
                {
                    id: generateId(),
                    name: 'Introduction to Computer Science',
                    type: 'lecture',
                    date: formatDateForStorage(today),
                    startTime: '09:00',
                    endTime: '11:00',
                    location: 'Main Hall, Building A',
                    description: 'Kick-off lecture covering semester overview and core concepts.',
                    link: 'https://example.com/lecture1'
                },
                {
                    id: generateId(),
                    name: 'Programming Basics Tutorial',
                    type: 'tutorial',
                    date: formatDateForStorage(today),
                    startTime: '12:30',
                    endTime: '14:00',
                    location: 'Computer Lab, Building B',
                    description: 'Hands-on session for programming fundamentals.',
                    link: ''
                },
                {
                    id: generateId(),
                    name: 'Project Discussion Meeting',
                    type: 'meeting',
                    date: formatDateForStorage(today),
                    startTime: '15:30',
                    endTime: '16:30',
                    location: 'Conference Room, Building C',
                    description: 'Align deliverables and next steps with the project team.',
                    link: ''
                },
                {
                    id: generateId(),
                    name: 'Data Structures Lecture',
                    type: 'lecture',
                    date: formatDateForStorage(tomorrow),
                    startTime: '10:00',
                    endTime: '12:00',
                    location: 'Main Hall, Building A',
                    description: 'In-depth session on arrays, linked lists, and trees.',
                    link: ''
                }
            ];
        }

        function createSampleDeadlines() {
            const today = normaliseDate(new Date());
            const twoDaysLater = normaliseDate(new Date(today.getFullYear(), today.getMonth(), today.getDate() + 2));
            return [
                {
                    id: generateId(),
                    name: 'Data Structures Assignment',
                    date: formatDateForStorage(today),
                    time: '23:59',
                    description: 'Submit linked list implementation and analysis.',
                    link: 'https://example.com/assignment'
                },
                {
                    id: generateId(),
                    name: 'Midterm Registration',
                    date: formatDateForStorage(twoDaysLater),
                    time: '18:00',
                    description: 'Final day to register for midterm examination slots.',
                    link: ''
                }
            ];
        }

        function createSampleTodos() {
            const today = formatDateForStorage(normaliseDate(new Date()));
            return [
                {
                    id: generateId(),
                    title: 'Review lecture notes',
                    notes: 'Focus on recursion walkthrough.',
                    date: today,
                    completed: false,
                    completedAt: null
                },
                {
                    id: generateId(),
                    title: 'Plan project outline',
                    notes: 'Draft milestones before Friday stand-up.',
                    date: today,
                    completed: false,
                    completedAt: null
                }
            ];
        }

        function getSchedules() {
            return loadItems(STORAGE_KEYS.schedules);
        }

        function getDeadlines() {
            return loadItems(STORAGE_KEYS.deadlines);
        }

        function getTodos() {
            return loadItems(STORAGE_KEYS.todos);
        }

        function loadItems(key) {
            try {
                const raw = localStorage.getItem(key);
                return raw ? JSON.parse(raw) : [];
            } catch (error) {
                console.warn('Failed to load data for', key, error);
                return [];
            }
        }

        function saveItems(key, value) {
            localStorage.setItem(key, JSON.stringify(value));
        }

        function normaliseDate(date) {
            const instance = new Date(date.getFullYear(), date.getMonth(), date.getDate());
            instance.setHours(0, 0, 0, 0);
            return instance;
        }

        function formatDateForStorage(date) {
            if (typeof date === 'string') {
                return date;
            }
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function formatReadableDate(date) {
            if (typeof date === 'string') {
                return formatReadableDate(new Date(date));
            }
            return date.toLocaleDateString(undefined, { weekday: 'long', month: 'long', day: 'numeric' });
        }

        function formatHour(hour) {
            const period = hour >= 12 ? 'PM' : 'AM';
            const display = hour % 12 === 0 ? 12 : hour % 12;
            return `${display}:00 ${period}`;
        }

        function isSameDay(a, b) {
            return formatDateForStorage(a) === formatDateForStorage(b);
        }

        function generateId() {
            if (typeof crypto !== 'undefined' && crypto.randomUUID) {
                return crypto.randomUUID();
            }
            return `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 8)}`;
        }

        function hexToRgb(hex) {
            const sanitized = hex.replace('#', '');
            const bigint = parseInt(sanitized, 16);
            return {
                r: (bigint >> 16) & 255,
                g: (bigint >> 8) & 255,
                b: bigint & 255
            };
        }
    </script>
</body>
</html>
